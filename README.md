# mComments
Индексируемая система комментариев. Код стоит из двух частей:
- Клиентская часть *client/*:
	* *index.html* -- HTML структура комментариев;
	* *index.php* -- PHP функция для вывода **индексируемых** комментариев
	* *mComments.js* -- JS функции для добавления, подгрузки комментариев;
	* *mCommentsAdd.php* -- скрипт добавления новых комментариев; 
	* *mCommentsMore.php* -- скрипт загрузки новых комментариев; 
	* *style.css* -- пример оформления;
	* *example.php* -- пример кода для вставки в Joomla.
- Админская часть *admin/*:
	* *index.html* -- HTML структура комментариев;
	* *init.sql* -- SQL инициализации таблиц;
	* *init.php* -- инициализация таблиц;
	* *getOptions.php* -- выведение списка *страница -> таблица*;
	* *mCommentsAdmin.js* -- скрипт управления админкой;
	* *mCommentsAdmin.php* -- взаимодействие с бд;
	* *style.css* -- пример оформления;
	* *example.php* -- пример кода для вставки в Joomla.
## Установка
Рекомендуемый последовательность установки:
1. Добавление стандартных стилей из *admin/*, *client/*;
2. Добавление части администратора;
3. Пробный запуск;
4. Добавление клиентской части;
5. Проверка;
6. Изменение стилей.

Для вставки кода в материалы *Joomla* используется плагин *sourcerer*.
### Добавление стандартных стилей
Добавьте содержимое *style.css* из *admin/* или *client/* в ваш шаблон. Например: */templates/protostar/css/template.css* или создайте новый *myStyle.css* и подгружайте его в шапке.
```html
<head>
...
<link rel="stylesheet" type="text/css" href="/path/to/myStyle.css">
...
</head>
```
### Добавление части администратора
Создайте новый модуль типа *HTML-код* в **Расширения &rarr; Модули &rarr; Создать**. Содержимое этого модуля можно скопировать из файла *admin/example.php* или собрать по частям из:
1. *index.html*;
2. *init.php*;
3. *getOptions.php*;
4. *mCommentsAdmin.js*.

Если вы добавили содержимое файла *example.php*, загрузите на сервер файлы *mCommentsAdmin.js* и *mCommentsAdmin.php*.

В файле *mCommentsAdmin.js* измените путь до файла *mCommentsAdmin.php* на реальный:
```javascript
...
url : '/path/to/mCommentsAdmin.php',
...
```

В файле *example.php* необходимо прописать путь к *mCommentsAdmin.js*:
```html
...
<script type="text/javascript" onload="mComments();" src="/templates/protostar/js/mCommentsAdmin.js" defer></script>
...
```

**"Опубликуйте"** созданный модуль, а **"Доступ"** выставите в **"Registered"**.

### Пробный запуск
Выставите полученный выше модуль на страницу. Зайдите на нее. Автоматизируйтесь. Вы только что создали базу комментариев.

### Добавление клиентской части

### Проверка

### Изменение стилей